# RDS Database Claim - Crossplane v2 (namespaced XR)
---
apiVersion: database.example.com/v1alpha1
kind: AppDatabase
metadata:
  name: ${{ values.databaseName }}
  namespace: default
  labels:
    app.kubernetes.io/name: ${{ values.databaseName }}
    app.kubernetes.io/managed-by: backstage
    backstage.io/kubernetes-id: rds-${{ values.databaseName }}
    environment: ${{ values.environment }}
  annotations:
    backstage.io/owner: ${{ values.owner }}
    argocd.argoproj.io/sync-wave: "1"
spec:
  # Crossplane v2 - flat spec structure
  databaseName: ${{ values.databaseName }}
  engine: ${{ values.engine }}
  engineVersion: "${{ values.engineVersion }}"
  instanceClass: ${{ values.instanceClass }}
  allocatedStorage: ${{ values.allocatedStorage }}
  region: ${{ values.region }}
  publiclyAccessible: ${{ values.publiclyAccessible }}
  multiAZ: ${{ values.multiAZ }}
  crossplane:
    compositionRef:
      name: database-composition
