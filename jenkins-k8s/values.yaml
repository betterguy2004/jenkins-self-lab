controller:
  # Used for the agent to connect to the controller
  agentListenerService:
    enabled: true

  # Pre-install plugins
  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - configuration-as-code
    - pipeline-stage-view
  
  # Expose Jenkins UI via NodePort for easy access on EC2
  serviceType: NodePort
  nodePort: 32000

  # Admin user creation
  admin:
    password: Jenkins@123456

  # JCasC Configuration to ensuring Kubernetes Cloud is active (chart often does this, but being explicit is good)
  JCasC:
    defaultConfig: true
    configScripts:
      jenkins-casc-config: |
        jenkins:
          systemMessage: "Jenkins configured via JCasC and Helm on Kubernetes"
          clouds:
            - kubernetes:
                name: "kubernetes"
                serverUrl: "https://kubernetes.default.svc.cluster.local"
                skipTlsVerify: true
                namespace: "jenkins"
                jenkinsUrl: "http://jenkins.jenkins.svc.cluster.local:8080"
                jenkinsTunnel: "jenkins-agent.jenkins.svc.cluster.local:50000"
                connectTimeout: 5
                readTimeout: 15
                containerCapStr: "10"

serviceAccountAgent:
  create: true
  name: "jenkins-agent"

# Persistence configuration (top-level, not under controller)
persistence:
  enabled: true
  storageClass: ebs-sc
  accessMode: ReadWriteOnce
  size: 8Gi
